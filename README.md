# KantanPro Desktop Application

WordPressプラグイン「KantanPro」をベースにしたマルチプラットフォーム対応デスクトップアプリケーションです。

## 特徴

- **マルチプラットフォーム対応**: Windows、macOS、Linux で動作
- **モダンなUI**: React + Styled Components による美しいインターフェース
- **設定管理**: ヘッダーの歯車アイコンからモーダルで設定を管理
- **自動保存**: 設定とデータの自動保存機能
- **インストーラー**: 各プラットフォーム用のインストーラーを自動生成

## 技術スタック

- **フレームワーク**: Electron
- **フロントエンド**: React 18
- **スタイリング**: Styled Components
- **アイコン**: React Icons
- **ビルドツール**: Electron Builder

## セットアップ

### 1. 依存関係のインストール

```bash
# ルートディレクトリ
npm install

# レンダラープロセス
cd src/renderer
npm install
cd ../..

# ネイティブモジュールのリビルド
npm run rebuild
```

### 2. 開発環境での実行

```bash
npm run dev
```

### 3. 本番ビルド

```bash
npm run build
```

### 4. インストーラーの作成（推奨）

```bash
npm run build-installer
```

または個別に：

```bash
npm run dist
```

## プロジェクト構造

```
kantan-pro-desktop/
├── src/
│   ├── main/                 # Electronメインプロセス
│   │   ├── main.js          # アプリケーションエントリーポイント
│   │   └── preload.js       # プリロードスクリプト
│   └── renderer/            # Reactアプリケーション
│       ├── public/          # 静的ファイル
│       ├── src/
│       │   ├── components/  # Reactコンポーネント
│       │   ├── App.js       # メインアプリコンポーネント
│       │   └── index.js     # Reactエントリーポイント
│       └── package.json
├── dist/                    # ビルド出力
├── package.json            # プロジェクト設定
└── README.md
```

## 主要機能

### 🎯 KantanPro完全移植機能
- **6つの管理タブ**：仕事リスト・伝票処理・顧客・サービス・協力会社・レポート
- **受注案件の進捗管理**：7段階の進捗ステータス（受注→進行中→完了→請求→支払い→ボツ→見積中）
- **顧客管理システム**：会社情報・担当者・部署管理
- **サービス・商品管理**：価格設定・税率管理
- **協力会社管理**：職能・スキル管理
- **受注書・請求書作成**：PDF出力機能
- **スタッフチャット機能**：リアルタイムコミュニケーション
- **レポート機能**：売上分析・確定申告対応

### 🔧 デスクトップアプリ専用機能
- **ローカルデータベース**：SQLiteによる高速データ管理
- **オフライン対応**：インターネット接続不要
- **マルチプラットフォーム**：Windows・macOS・Linux対応
- **自動バックアップ**：データの安全性確保
- **高速検索**：インデックス最適化による高速検索

### ⚙️ 設定機能
- **会社情報設定**：会社名・住所・連絡先
- **消費税設定**：税制モード・税率設定・適格請求書番号
- **業務設定**：表示件数・納期警告日数
- **メール設定**：SMTP設定による自動メール送信
- **一般設定**：テーマ・言語・自動保存・通知

## カスタマイズ

### 新しい機能の追加
1. `src/renderer/src/components/` に新しいコンポーネントを作成
2. `MainContent.js` に機能を統合
3. 必要に応じて設定項目を `SettingsModal.js` に追加

### スタイルの変更
- Styled Components を使用してコンポーネントレベルでスタイリング
- グローバルスタイルは `src/renderer/public/index.html` で設定

### 設定項目の追加
1. `App.js` の初期設定オブジェクトに新しい項目を追加
2. `SettingsModal.js` にフォーム要素を追加
3. 必要に応じてメインプロセスでの処理を追加

## ビルド設定

`package.json` の `build` セクションで各プラットフォーム用の設定を管理：

- **macOS**: DMGファイル
- **Windows**: NSISインストーラー
- **Linux**: AppImageファイル

## 開発のヒント

- 開発中は `npm run dev` でホットリロード対応
- `src/main/main.js` でメインプロセスの動作を制御
- `src/main/preload.js` でセキュアなAPI公開
- React DevTools は開発モードで自動的に利用可能

## トラブルシューティング

### よくある問題

1. **ビルドエラー**: 依存関係が正しくインストールされているか確認
2. **設定が保存されない**: Electron Store の権限を確認
3. **アイコンが表示されない**: アイコンファイルのパスを確認

### ログの確認

開発モードでは自動的に DevTools が開き、コンソールでログを確認できます。

## ライセンス

このプロジェクトは MIT ライセンスの下で公開されています。
#
# 🎉 完成したKantanProデスクトップアプリの特徴

### ✨ 完全実装済み機能
1. **📋 受注管理システム** - 案件の作成・編集・ステータス管理・納期警告
2. **👥 顧客管理システム** - 顧客情報のCRUD操作・検索・部署管理
3. **⚙️ サービス管理システム** - サービス登録・価格設定・税率管理
4. **🤝 協力会社管理システム** - 協力会社情報・職能管理・適格請求書対応
5. **📊 レポート機能** - 売上分析・顧客分析・確定申告対応
6. **💬 スタッフチャット** - リアルタイムコミュニケーション・オンライン状況表示
7. **🔧 詳細設定システム** - 会社情報・消費税・業務・メール設定

### 🎯 KantanPro完全移植機能
- **7段階進捗管理**: 受注→進行中→完了→請求→支払い→ボツ→見積中
- **消費税対応**: 標準税率・軽減税率・適格請求書番号管理
- **納期警告システム**: 期限間近案件の自動警告表示
- **職能・スキル管理**: 協力会社の専門分野管理
- **部署別管理**: 顧客の部署・担当者別管理

### 💾 データベース機能
- **SQLite3による高速ローカルDB**: オフライン完全対応
- **自動バックアップ**: データの安全性確保
- **インデックス最適化**: 高速検索・ソート
- **データ整合性チェック**: 自動データ修復機能

### 🚀 パフォーマンス最適化
- **メモリ効率化**: 大量データの高速処理
- **非同期処理**: UIブロックなしの快適操作
- **キャッシュシステム**: 頻繁アクセスデータの高速化
- **レスポンシブデザイン**: モバイル・タブレット対応

## 📱 使用方法

### 基本操作
1. **ダッシュボード**: 全体の状況を一目で確認
2. **仕事リスト**: 受注案件の管理・ステータス更新
3. **伝票処理**: 受注書・請求書の作成（今後実装）
4. **顧客管理**: 顧客情報の登録・編集・検索
5. **サービス管理**: 提供サービスの価格・税率設定
6. **協力会社**: パートナー企業の情報・職能管理
7. **レポート**: 売上分析・確定申告用資料生成

### スタッフチャット
- 右下のチャットアイコンをクリック
- Ctrl+Enterで素早くメッセージ送信
- オンラインメンバーの確認
- 案件別チャット（受注詳細画面から）

### 設定管理
- ヘッダーの歯車アイコンをクリック
- 会社情報・消費税・メール設定等を管理
- 設定は自動保存

## 🔄 今後の実装予定
- **PDF生成機能**: 受注書・請求書のPDF出力
- **メール送信機能**: 自動メール送信システム
- **ファイル添付**: ドキュメント管理機能
- **データ同期**: クラウド同期オプション
- **プラグインシステム**: 機能拡張対応

## 🛠️ 開発者向け情報

### アーキテクチャ
```
kantan-pro-desktop/
├── src/main/              # Electronメインプロセス
│   ├── main.js           # アプリケーション制御
│   ├── database.js       # SQLiteデータベース管理
│   └── preload.js        # セキュアAPI公開
├── src/renderer/         # Reactフロントエンド
│   ├── src/components/   # UIコンポーネント
│   │   ├── ClientManager.js      # 顧客管理
│   │   ├── OrderManager.js       # 受注管理
│   │   ├── ServiceManager.js     # サービス管理
│   │   ├── SupplierManager.js    # 協力会社管理
│   │   ├── ReportManager.js      # レポート機能
│   │   ├── StaffChat.js          # スタッフチャット
│   │   └── SettingsModal.js      # 設定モーダル
│   └── src/App.js        # メインアプリケーション
└── dist/                 # ビルド出力
```

### データベーススキーマ
- **clients**: 顧客情報
- **services**: サービス・商品情報
- **suppliers**: 協力会社情報
- **orders**: 受注情報
- **order_items**: 受注項目詳細
- **cost_items**: コスト項目
- **chat_messages**: チャットメッセージ
- **settings**: アプリケーション設定

### API設計
- **IPC通信**: メインプロセス↔レンダラープロセス
- **セキュアAPI**: contextBridge経由の安全な通信
- **非同期処理**: Promise/async-awaitベース
- **エラーハンドリング**: 包括的なエラー処理

## 🎯 まとめ

KantanProデスクトップアプリケーションは、WordPressプラグインの全機能を完全移植し、さらにデスクトップアプリならではの高速性・安定性・オフライン対応を実現しました。

**主な特徴:**
- ✅ 完全なオフライン対応
- ✅ 高速なローカルデータベース
- ✅ 直感的なユーザーインターフェース
- ✅ マルチプラットフォーム対応
- ✅ 自動インストーラー生成
- ✅ セキュアなデータ管理

フリーランス・スモールビジネス向けの業務効率化を強力にサポートする、完全なデスクトップソリューションです。